var y=Object.defineProperty,$=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var f=(s,a,n)=>a in s?y(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n,g=(s,a)=>{for(var n in a||(a={}))C.call(a,n)&&f(s,n,a[n]);if(_)for(var n of _(a))x.call(a,n)&&f(s,n,a[n]);return s},N=(s,a)=>$(s,T(a));import{r as d,j as e,a as o,A as k,d as w,b as E,c as M,f as u,B as b,u as R,e as A,g as O,h as L,i as P,k as D,l as B,m as z,n as F,o as U,p as H,q as K,s as j,t as G,v as W,w as V,x as q,y as Q,F as Y,S as Z,R as v,z as J,C as X}from"./vendor.2353809c.js";const ee=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}};ee();const S=d.exports.createContext(),ae=({reducer:s,initialState:a,children:n})=>e(S.Provider,{value:d.exports.useReducer(s,a),children:n}),m=()=>d.exports.useContext(S);function se(){return m(),o("div",{className:"main__header",children:[o("div",{className:"main__header-left",children:[e(k,{className:"main__header-avatar",alt:"",src:""}),e(w,{className:"header__clock"})]}),o("div",{className:"main__header-search",children:[e(E,{}),e("input",{type:"text",className:"header__input",placeholder:"Hello developers"})]}),e("div",{className:"main__header-right",children:e(M,{className:"header__helpIcon"})})]})}const te={apiKey:"AIzaSyCK2hGmur2VN8KbON7WFKN_zz2QpY-8zsM",authDomain:"slack-clone-af2a5.firebaseapp.com",projectId:"slack-clone-af2a5",storageBucket:"slack-clone-af2a5.appspot.com",messagingSenderId:"150571282982",appId:"1:150571282982:web:438753f98513bad1732ce7",measurementId:"G-WT4YENSTTZ"},ne=u.initializeApp(te),h=ne.firestore(),oe=u.auth(),re=new u.auth.GoogleAuthProvider,ie={user:null},I={SET_USER:"SET_USER"},le=(s,a)=>{switch(console.log(a),a.type){case I.SET_USER:return N(g({},s),{user:a.user});default:return s}};function ce(){const[s,a]=m();return e("div",{className:"login",children:o("div",{className:"login__container",children:[e("img",{className:"login__img",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Slack_Technologies_Logo.svg/2560px-Slack_Technologies_Logo.svg.png",alt:"logo"}),e("h1",{children:" Sign in to Mubosher Programmer HQ"}),e("p",{children:"muydinovmubosher.slack"}),e(b,{onClick:i=>{oe.signInWithPopup(re).then(t=>{console.log(t),a({type:I.SET_USER,user:t.user})}).catch(t=>alert(t.message))},className:"google__btn",children:"Sign In with Google"})]})})}function l({Icon:s,Title:a,id:n,addChannelOption:i}){const t=R();return o("div",{className:s?"sidebar__options big":"sidebar__options small",onClick:i?()=>{const p=prompt("Please enter channel name");p&&h.collection("room").add({room:p})}:()=>{n?t.push(`/room/${n}`):t.push("/title/")},children:[s&&e(s,{className:"sidebarOption__icon"}),s?e("h3",{children:a}):o("h3",{className:"sidebarOption__channelName",children:[" ",e("span",{className:"sidebarOptions__hashtag",children:"#"}),"   ",a," "]})]})}function de(){const[{user:s}]=m(),[a,n]=d.exports.useState([]);return d.exports.useEffect(()=>{h.collection("room").onSnapshot(i=>{console.log(i),n(i.docs.map(t=>({id:t.id,name:t.data().room})))})},[]),console.log("user>>>>",s),console.log(a),o("div",{className:"sidebar",children:[o("div",{className:"sidebar__header",children:[o("div",{className:"sidebar__info",children:[e("h2",{children:"@creative_programmer"}),o("h3",{children:[e(A,{className:"sidebar__dotted"}),s==null?void 0:s.displayName]})]}),e(O,{className:"sidebar__change"})]}),e(l,{Icon:L,Title:"Threads"}),e(l,{Icon:P,Title:"Mentions & reactions"}),e(l,{Icon:D,Title:"Saved Items"}),e(l,{Icon:B,Title:"Channel browser"}),e(l,{Icon:z,Title:"People & user groups"}),e(l,{Icon:F,Title:"Apps"}),e(l,{Icon:U,Title:"File Browser"}),e(l,{Icon:H,Title:"Show less"}),e("hr",{}),e(l,{Icon:K,Title:"Channels"}),e("hr",{}),e(l,{Icon:j,addChannelOption:!0,Title:"Add Channel"}),e("div",{className:"sidebar__scroll",children:a.map((i,t)=>e(l,{Title:i.name,id:i.id},t))})]})}function he({massage:s,timestamp:a,user:n,userImg:i}){return o("div",{className:"massage",children:[e("img",{src:i}),o("div",{className:"massage__info",children:[o("h4",{children:[" ",n,o("span",{className:"massage__timestamp",children:[new Date(a==null?void 0:a.toDate()).toUTCString()," "]})]}),o("p",{children:[" ",s," "]})]})]})}function me({channelName:s,id:a}){const[n,i]=d.exports.useState(""),[{user:t}]=m(),r=c=>{c.preventDefault(),a&&(h.collection("room").doc(a).collection("massage").add({massage:n,timestamp:u.firestore.FieldValue.serverTimestamp(),user:t.displayName,userImg:t.photoURL}),setTimeout(()=>{i("")},1e3))};return console.log(n),e("div",{className:"chat__input",children:o("form",{children:[e("input",{value:n,onChange:c=>i(c.target.value),type:"text",placeholder:`# Enter Massage of ${s}`,className:"chat__input-item"}),e(b,{className:"form__btn",type:"submit",onClick:r,children:"Send Massage"}),e(G,{className:"file__icon"})]})})}function ue(){const{roomId:s}=W(),[a,n]=d.exports.useState(null),[i,t]=d.exports.useState([]);return d.exports.useEffect(()=>{s&&h.collection("room").doc(s).onSnapshot(r=>{n(r.data().room)}),h.collection("room").doc(s).collection("massage").orderBy("timestamp","asc").onSnapshot(r=>t(r.docs.map(c=>c.data())))},[s]),console.log("roomMassage>>>>>>",i),o("div",{className:"main__massage-container",children:[o("div",{className:"chat__header",children:[e("div",{className:"chat__headerLeft",children:o("h4",{className:"chat__channelName",children:[o("strong",{children:["# ",a]}),e(V,{})]})}),e("div",{className:"chat__headerRight",children:o("p",{children:[e(q,{className:"chat__info"})," Details"]})})]}),e("div",{className:"chat__massages",children:i.map(r=>e(he,{massage:r.massage,timestamp:r.timestamp,user:r.user,userImg:r.userImg},2))}),e(me,{channelName:a,id:s})]})}function pe(){const[{user:s},a]=m();return e("div",{className:"App",children:e(Q,{children:s?o(Y,{children:[e(se,{}),o("div",{className:"app__body",children:[e(de,{}),o(Z,{children:[e(v,{path:"/room/:roomId",children:e("div",{className:"chat__scroll",children:e("div",{className:"chats__overflow",children:e(ue,{})})})}),e(v,{path:"/",children:e("div",{className:"information",children:e("h1",{children:" Welcome The slack clone "})})})]})]})]}):e(ce,{})})})}J.render(e(X.StrictMode,{children:e(ae,{initialState:ie,reducer:le,children:e(pe,{})})}),document.getElementById("root"));
